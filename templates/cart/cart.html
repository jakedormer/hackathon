{% extends "base.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'cart/css/cart.css' %}" crossorigin="anonymous">
{% endblock %}

{% block body %}

  <!--Grid row-->
  <div class="row">
    {% if request.cart.items_in_cart == 0 %}
    <div class="col">
      <h3>Your cart is empty</h3>
      <p>Have a look around our shop!</p>
    </div>
    {% else %}
    <h2 class="my-3 text-center w-100">Cart: {{request.session.cart.items_in_cart}} items</h2>
    <div class="col-lg-8">

      <!-- Cart Item -->
      {% for product in products %}
      {% ifchanged %}
      <h3 class="mt-3"><span class="text-muted h5">Sold By</span> <b>{{product.vendor.display_name}}</b></h3>
      <hr class="">
      {% endifchanged %}
      <div class="row">
        <div class="col-3">
          <a href="{% if product.parent %}{{product.parent.slug}}/p/{{product.parent.id}} {% else %} {{product.slug}}/p/{{product.id}} {% endif %}">
          <img class="img-fluid img-thumbnail cart-img" src="{{product.image_src}}" alt="{{product.title}}" style="width:100px">
          </a>
        </div>
        <div class="col-5">
          <p class="font-weight-bold">{{product.title}}</p>
          <p class="text-muted">{{product.category}}</p>
          <p>Size: <b><u>{{product.size}}</u></b></p>
        </div>
        <div class="col-4">
          <p class="font-weight-bold">Quantity</p>

          <form>
            <div class="form-group">
                <select class="form-control text-center" id="update" disabled>
                  {% for item in request.session.cart.products %}
                  {% if item.id|add:"0" == product.id %}
                  <option class="text-center">{{item.quantity}}</option>
                  {% endif %}
                  {% endfor %}
                </select>
              </div>
          </form>

          <form action="/remove_from_cart" method="get">
            <input type="hidden" name="product_id" value="{{product.id}}">
            <button type="submit" class="btn btn-outline-danger btn-sm">Remove</button>
          </form>
        </div>
      </div>
      <hr>
    {% endfor %}
  </div>

  <div class="col-lg-4 border">

    <h5 class="my-3">The total amount of</h5>

    <ul class="list-group list-group-flush">
      <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
        Temporary amount
        <span></span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center px-0">
        Shipping
        <span></span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
        <div>
          <strong>The total amount of</strong>
          <strong>
            <p class="mb-0">(including VAT)</p>
          </strong>
        </div>
        <span><strong>Â£XX.XX</strong></span>
      </li>
    </ul>

    <button type="button" class="btn btn-success w-100"><i class="fas fa-lock mr-2"></i><b>Checkout</b></button>

    <div class="text-center mt-4 mb-2 text-dark">
      <i class="fab fa-cc-visa fa-2x mr-2"></i>
      <i class="fab fa-cc-mastercard fa-2x mr-2"></i>
      <i class="fab fa-stripe fa-2x"></i>
    </div>

  </div>

{% endif %}



</div>


{% endblock %}